"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[237],{68265:function(ne,N,n){n.r(N),n.d(N,{default:function(){return te}});var X=n(73137),a=n(87340),y=n(85893),T=[{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u59D3\u540D",dataIndex:"index",align:"center",width:80},{title:"\u51FA\u52E4\u6B21\u6570",dataIndex:"index",align:"center",width:80},{title:"\u4E0A\u8BFE\u65F6\u957F",dataIndex:"index",align:"center",width:80},{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80}],Y=function(){return(0,y.jsx)(a.Z,{search:!1,columns:T})},V=n(11281),g=n.n(V),m=n(12741),S=n.n(m),p=n(12812),L=n.n(p),E=n(97983),_=n.n(E),J=n(40794),b=n.n(J),A=n(64129),O=n.n(A),j=n(63154),R=n(30028),$=n(30381),M=n.n($);function B(){return W.apply(this,arguments)}function W(){return W=b()(_()().mark(function h(){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,R.request)("/seller/api/courses",{params:{"clientId.in":385}}).then(function(i){return i.map(function(u){return{label:u.title,value:u.roomId}}).filter(function(u,d,c){return c.findIndex(function(l){return l.value===u.value})===d})}));case 1:case"end":return o.stop()}},h)})),W.apply(this,arguments)}function x(h){return U.apply(this,arguments)}function U(){return U=b()(_()().mark(function h(f){var o;return _()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=g()(g()({clientId:385},f),{},{startTime:+M()(f.startTime).startOf("day"),endTime:+M()(f.endTime).endOf("day")}),u.abrupt("return",(0,R.request)("/analysis/api/room-timesget/getClientTimeByClientId",{params:o}));case 2:case"end":return u.stop()}},h)})),U.apply(this,arguments)}function K(h){return H.apply(this,arguments)}function H(){return H=b()(_()().mark(function h(f){return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/analysis/api/studentRoomTimeDetailStatistics",{params:g()({clientId:385},f)}).then(function(u){var d=u.dayDetail.map(function(c){return g()(g()({},c),{},{times:c.info.length,duration:c.info.map(function(l){return l.timeLong}).reduce(function(l,w){return l+w},0)},Object.fromEntries(c.info.map(function(l){return[l.sumDay,l.timeLong]})))}).filter(function(c){return c.duration});return g()(g()({},u),{},{data:[].concat(O()((0,j.we)(d)),O()(d.length>0?[g()({index:d.length+1,name:"\u65F6\u957F\u7EDF\u8BA1"},u.daySum)]:[])).map(function(c,l,w){return g()(g()({},c),{},{dataLength:w.length})}),success:!0})}));case 1:case"end":return i.stop()}},h)})),H.apply(this,arguments)}var re=n(13714),Q=n(96486),P=n(67294),k=!1,D=[],F=function(f,o){var i=f.dataLength;return i-1===o?{colSpan:0}:{}},Z=function(f,o,i){return o.dataLength-1===i?(0,y.jsx)("strong",{children:f}):f},q=function(f){var o;return[{title:"\u89D2\u8272",dataIndex:"role",hideInTable:!0,search:!0,valueType:"select",fieldProps:{options:[{label:"\u8001\u5E08",value:"teacher"},{label:"\u5B66\u751F",value:"student"},{label:"\u52A9\u6559",value:"ta"}]}},{title:"\u6559\u5BA4",dataIndex:"roomId",hideInTable:!0,search:!0,valueType:"select",request:B},{title:"\u5B66\u751F\u6570",dataIndex:"minStudent",hideInTable:!0,search:!0},{title:"\u5F53\u65E5\u8BFE\u7A0B\u65F6\u957F",dataIndex:"minRoomTime",hideInTable:!0,search:!0,initialValue:15*60,valueType:"select",request:function(){var i=b()(_()().mark(function d(){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:"\u5927\u4E8E15\u5206\u949F",value:900},{label:"\u5927\u4E8E30\u5206\u949F",value:1800},{label:"\u5927\u4E8E45\u5206\u949F",value:2700},{label:"\u5927\u4E8E60\u5206\u949F",value:3600}]);case 1:case"end":return l.stop()}},d)}));function u(){return i.apply(this,arguments)}return u}()},(o={title:"\u7528\u6237\u4E0A\u8BFE\u65F6\u957F",dataIndex:"minUserTime",hideInTable:!0,search:!0,valueType:"select"},L()(o,"search",{transform:function(u){return{minTeacherTime:u,minStudentTime:u}}}),L()(o,"request",function(){var i=b()(_()().mark(function d(){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:"\u5927\u4E8E15\u5206\u949F",value:900},{label:"\u5927\u4E8E30\u5206\u949F",value:1800},{label:"\u5927\u4E8E45\u5206\u949F",value:2700},{label:"\u5927\u4E8E60\u5206\u949F",value:3600}]);case 1:case"end":return l.stop()}},d)}));function u(){return i.apply(this,arguments)}return u}()),o),L()({title:"\u65F6\u95F4",dataIndex:"timeRange",hideInTable:!0,search:!0,valueType:"dateRange",colSize:2,initialValue:[M()().add(-1,"d"),M()().add(-1,"d")],fieldProps:{allowClear:!1}},"search",{transform:function(u){var d=S()(u,2),c=d[0],l=d[1];return{startTime:c,endTime:l}}}),{title:"\u5E8F\u53F7",dataIndex:"index",valueType:"index",align:"center",width:80,onCell:F},{title:"\u59D3\u540D",dataIndex:"name",align:"center",width:80,onCell:function(u,d){var c=u.dataLength;if(c-1===d)return{colSpan:4}}},{title:"\u51FA\u52E4\u6B21\u6570",dataIndex:"times",align:"center",width:80,defaultSortOrder:"descend",sorter:{compare:function(u,d){return u.times-d.times}},onCell:F},{title:"\u4E0A\u8BFE\u65F6\u957F",dataIndex:"duration",align:"center",width:80,renderText:j.V4,onCell:F}].concat(O()(f.map(function(i){return{title:i[0],dataIndex:i[0],width:100,renderText:j.V4}}))).map(function(i){return g()(g()({search:!1},i),{},{render:Z})})},G=function(){var h=(0,P.useState)({}),f=S()(h,2),o=f[0],i=f[1],u=(0,P.useState)([]),d=S()(u,2),c=d[0],l=d[1],w=q(c),r=w.map(function(t){return t.width}).reduce(function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t+s});return(0,y.jsx)(a.Z,{bordered:!0,rowKey:"index",columns:w,search:{labelWidth:100},request:function(){var t=b()(_()().mark(function s(e){return _()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!k){C.next=3;break}return k=!1,C.abrupt("return",D);case 3:return x(e).then(function(I){return l(Object.entries(I))}),C.next=6,K(e);case 6:return D=C.sent,C.abrupt("return",D);case 8:case"end":return C.stop()}},s)}));return function(s){return t.apply(this,arguments)}}(),headerTitle:(0,y.jsx)("span",{style:{color:"#1890ff"},children:"\u65F6\u957F\u7EDF\u8BA1 79\u5C0F\u65F610\u52069\u79D2"}),pagination:!1,defaultSize:"small",scroll:{x:"calc(".concat(r,"px + 50%)")},onChange:function(s,e,v){(0,Q.isEmpty)(v)||(k=!0)}})},ee=function(){return(0,y.jsx)(a.Z,{})},z=function(){return(0,y.jsx)(a.Z,{})},te=function(){return(0,y.jsx)(X._z,{tabList:[{tab:"\u7EFC\u5408\u6570\u636E\u7EDF\u8BA1",key:"ComprehensiveStatistics",children:(0,y.jsx)(G,{})},{tab:"\u6559\u5BA4\u8BFE\u65F6\u7EDF\u8BA1",key:"ClassroomClassHourStatistics",children:(0,y.jsx)(Y,{})},{tab:"\u6559\u5E08\u8BFE\u65F6\u7EDF\u8BA1",key:"TeacherClassHourStatistics",children:(0,y.jsx)(z,{})},{tab:"\u5B66\u751F\u8BFE\u65F6\u7EDF\u8BA1",key:"StudentClassHourStatistics",children:(0,y.jsx)(ee,{})}]})}},13714:function(ne,N,n){n.d(N,{$H:function(){return l},EP:function(){return U},Gr:function(){return W},Hf:function(){return ee},No:function(){return f},P6:function(){return q},Rq:function(){return k},Zy:function(){return O},_I:function(){return d},fZ:function(){return R},hS:function(){return M},qY:function(){return Q},qm:function(){return te},se:function(){return i},so:function(){return F},wA:function(){return b}});var X=n(97983),a=n.n(X),y=n(11281),T=n.n(y),Y=n(97548),V=n.n(Y),g=n(40794),m=n.n(g),S=n(63154),p=n(30028),L=n(27484),E=n.n(L),_=["classroomStatus"],J=["coverUrl"];function b(r){return A.apply(this,arguments)}function A(){return A=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=466",{params:T()(T()({},t),{},{isDelete:1})}).then(function(v){return{data:(0,S.we)(v.courseList,t),total:v.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function O(r){return j.apply(this,arguments)}function j(){return j=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=466",{params:t}).then(function(v){return{data:(0,S.we)(v.studentList,t),total:v.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function R(r){return $.apply(this,arguments)}function $(){return $=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/students",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function M(r){return B.apply(this,arguments)}function B(){return B=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/students/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function W(r){return x.apply(this,arguments)}function x(){return x=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/students/".concat(t)));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function U(r){return K.apply(this,arguments)}function K(){return K=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/students/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}var H={ended:function(t){return t.type===2&&t.endAt&&E()(t.startAt).isBefore(E()())},notStarted:function(t){return t.type===2&&E()().isBefore(t.startAt)},ongoing:function(t){return t.type===2&&!t.endAt&&E()(t.startAt).isBefore(E()())},video:function(t){return t.type===1}},re=function(t,s){return t.find(function(e){return H[e](s)})};function Q(r){return P.apply(this,arguments)}function P(){return P=m()(a()().mark(function r(t){var s,e,v;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return s=t.classroomStatus,e=s===void 0?[]:s,v=V()(t,_),I.abrupt("return",(0,p.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=466&sort=startAt,desc&hasHomework=1",{params:v}).then(function(ae){var ue=ae.filter(function(se){return re(e,se)});return{data:(0,S.we)(ue,v),success:!0}}));case 2:case"end":return I.stop()}},r)})),P.apply(this,arguments)}function k(r){return D.apply(this,arguments)}function D(){return D=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function F(r){return Z.apply(this,arguments)}function Z(){return Z=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/course-classes/delete/".concat(t)));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function q(r){return G.apply(this,arguments)}function G(){return G=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/courses",{method:"post",data:T()({teacher:"",clientId:"466",client:{},isDelete:1},t)}));case 1:case"end":return e.stop()}},r)})),G.apply(this,arguments)}function ee(r){return z.apply(this,arguments)}function z(){return z=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/courses/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),z.apply(this,arguments)}function te(){return h.apply(this,arguments)}function h(){return h=m()(a()().mark(function r(){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=466").then(function(e){return e.totalNum}));case 1:case"end":return s.stop()}},r)})),h.apply(this,arguments)}function f(r){return o.apply(this,arguments)}function o(){return o=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/courses/".concat(t)).then(function(v){var C=v.coverUrl,I=V()(v,J);return T()({coverUrl:[{url:C}]},I)}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function i(r){return u.apply(this,arguments)}function u(){return u=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/course-classes/".concat(t)));case 1:case"end":return e.stop()}},r)})),u.apply(this,arguments)}function d(r){return c.apply(this,arguments)}function c(){return c=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/course-classes",{method:"post",data:T()({clientId:"466"},t)}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function l(r){return w.apply(this,arguments)}function w(){return w=m()(a()().mark(function r(t){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}}}]);
